size = 20,
family = "Arial"),
plot.subtitle = element_text(size = 12,
face = "plain",
family = "Arial"),
plot.caption = element_text(hjust = 0,
face = "plain",
family = "Arial",
size = 8,
colour = "#777777"),
panel.background = element_rect(fill = "white",
colour = "white",
size = 0.15,
linetype = "solid"),
panel.grid.major = element_line(size = 0.15,
linetype = 'solid',
colour = "gray90"),
panel.grid.minor = element_line(size = 0.15,
linetype = 'solid',
colour = "gray90"),
axis.title.x = (element_text(size = 16,
family = "Arial")),
axis.title.y = (element_text(size =16,
family = "Arial")),
element_line(linetype = "dotted",
colour = "gray99",
size = .1),
axis.text.x = element_text(angle = 0,
hjust = 0.5,
size = 12,
family = ""),
axis.text.y = element_text(size = 12,
family = ""),
legend.text = element_text(size = 12,
family = ""),
legend.title = element_blank()) +
labs(title = "Targeting accuracy by type of model",
subtitle = "National Poverty Line - Ethiopia 2015-16 (Full sample)",
x = "Score cutoff",
y = "% misclassified",
caption = paste(" ")) +
ggsave(paste0("../06 Figures/04 Accuracy/", "01", "_", "target_error_full_allmodels_2", ".jpeg"),
width = 10, height = 6)
library(pROC)
library(pROC)
palette
roc_mod1 <- roc(pred_mod1_test$poor_npl1, pred_mod1_test$pred_score_pr_test)
auc_mod1 <- round(auc(pred_mod1_test$poor_npl1, pred_mod1_test$pred_score_pr_test), 4)
ggroc(roc_mod1, colour = '#E15759FF', size = 1) +
ggtitle(paste0('ROC Curve - EN-LSMS', '(AUC = ', auc_ridge, ')')) +
theme_minimal() +
theme(plot.title = element_text(face = "bold",
size = 16,
family = "Arial"),
plot.subtitle = element_text(size = 12,
face = "plain",
family = "Arial"),
plot.caption = element_text(hjust = 0,
face = "plain",
family = "Arial",
size = 8,
colour = "#777777"),
panel.background = element_rect(fill = "white",
colour = "white",
size = 0.15,
linetype = "solid"),
panel.grid.major = element_line(size = 0.15,
linetype = 'solid',
colour = "gray40"),
panel.grid.minor = element_line(size = 0.15,
linetype = 'solid',
colour = "gray40"),
axis.title.x = (element_text(size = 16,
family = "Arial")),
axis.title.y = (element_text(size =16,
family = "Arial")),
element_line(linetype = "dotted",
colour = "gray99",
size = .1),
axis.text.x = element_text(angle = 0,
hjust = 0.5,
size = 12,
family = ""),
axis.text.y = element_text(size = 12,
family = ""),
legend.text = element_text(size = 12,
family = ""),
legend.title = element_blank()) +
labs(subtitle = "National Poverty Line - Ethiopia 2015-16 (Full sample)",
x = "Specificity (True negative rate)",
y = "Sensitivity (True positive rate)",
caption = paste(" ")) +
ggsave(paste0("../06 Figures/04 Accuracy/", "02", "_", "roc_full_mod1", ".jpeg"),
width = 10, height = 6)
roc_mod1 <- roc(pred_mod1_test$poor_npl1, pred_mod1_test$pred_score_pr_test)
auc_mod1 <- round(auc(pred_mod1_test$poor_npl1, pred_mod1_test$pred_score_pr_test), 4)
ggroc(roc_mod1, colour = '#E15759FF', size = 1) +
ggtitle(paste0('ROC Curve - EN-LSMS', '(AUC = ', auc_mod1, ')')) +
theme_minimal() +
theme(plot.title = element_text(face = "bold",
size = 16,
family = "Arial"),
plot.subtitle = element_text(size = 12,
face = "plain",
family = "Arial"),
plot.caption = element_text(hjust = 0,
face = "plain",
family = "Arial",
size = 8,
colour = "#777777"),
panel.background = element_rect(fill = "white",
colour = "white",
size = 0.15,
linetype = "solid"),
panel.grid.major = element_line(size = 0.15,
linetype = 'solid',
colour = "gray40"),
panel.grid.minor = element_line(size = 0.15,
linetype = 'solid',
colour = "gray40"),
axis.title.x = (element_text(size = 16,
family = "Arial")),
axis.title.y = (element_text(size =16,
family = "Arial")),
element_line(linetype = "dotted",
colour = "gray99",
size = .1),
axis.text.x = element_text(angle = 0,
hjust = 0.5,
size = 12,
family = ""),
axis.text.y = element_text(size = 12,
family = ""),
legend.text = element_text(size = 12,
family = ""),
legend.title = element_blank()) +
labs(subtitle = "National Poverty Line - Ethiopia 2015-16 (Full sample)",
x = "Specificity (True negative rate)",
y = "Sensitivity (True positive rate)",
caption = paste(" ")) +
ggsave(paste0("../06 Figures/04 Accuracy/", "02", "_", "roc_full_mod1", ".jpeg"),
width = 10, height = 6)
palette
#----ROC - Model 2----
roc_mod2 <- roc(pred_mod2_test$poor_npl1, pred_mod2_test$pred_score_pr_test)
auc_mod2 <- round(auc(pred_mod2_test$poor_npl1, pred_mod2_test$pred_score_pr_test), 4)
ggroc(roc_mod2, colour = '#8CD17DFF', size = 1) +
ggtitle(paste0('ROC Curve - EN-LSMS+RWI', '(AUC = ', auc_mod2, ')')) +
theme_minimal() +
theme(plot.title = element_text(face = "bold",
size = 16,
family = "Arial"),
plot.subtitle = element_text(size = 12,
face = "plain",
family = "Arial"),
plot.caption = element_text(hjust = 0,
face = "plain",
family = "Arial",
size = 8,
colour = "#777777"),
panel.background = element_rect(fill = "white",
colour = "white",
size = 0.15,
linetype = "solid"),
panel.grid.major = element_line(size = 0.15,
linetype = 'solid',
colour = "gray40"),
panel.grid.minor = element_line(size = 0.15,
linetype = 'solid',
colour = "gray40"),
axis.title.x = (element_text(size = 16,
family = "Arial")),
axis.title.y = (element_text(size =16,
family = "Arial")),
element_line(linetype = "dotted",
colour = "gray99",
size = .1),
axis.text.x = element_text(angle = 0,
hjust = 0.5,
size = 12,
family = ""),
axis.text.y = element_text(size = 12,
family = ""),
legend.text = element_text(size = 12,
family = ""),
legend.title = element_blank()) +
labs(subtitle = "National Poverty Line - Ethiopia 2015-16 (Full sample)",
x = "Specificity (True negative rate)",
y = "Sensitivity (True positive rate)",
caption = paste(" ")) +
ggsave(paste0("../06 Figures/04 Accuracy/", "02", "_", "roc_full_mod2", ".jpeg"),
width = 10, height = 6)
palette
#----ROC - Model 3----
roc_mod3 <- roc(pred_mod3_test$poor_npl1, pred_mod3_test$predicted_probs)
auc_mod3 <- round(auc(pred_mod3_test$poor_npl1, pred_mod3_test$predicted_probs), 4)
ggroc(roc_mod3, colour = '#499894FF', size = 1) +
ggtitle(paste0('ROC Curve - EBM-LSMS', '(AUC = ', auc_mod3, ')')) +
theme_minimal() +
theme(plot.title = element_text(face = "bold",
size = 16,
family = "Arial"),
plot.subtitle = element_text(size = 12,
face = "plain",
family = "Arial"),
plot.caption = element_text(hjust = 0,
face = "plain",
family = "Arial",
size = 8,
colour = "#777777"),
panel.background = element_rect(fill = "white",
colour = "white",
size = 0.15,
linetype = "solid"),
panel.grid.major = element_line(size = 0.15,
linetype = 'solid',
colour = "gray40"),
panel.grid.minor = element_line(size = 0.15,
linetype = 'solid',
colour = "gray40"),
axis.title.x = (element_text(size = 16,
family = "Arial")),
axis.title.y = (element_text(size =16,
family = "Arial")),
element_line(linetype = "dotted",
colour = "gray99",
size = .1),
axis.text.x = element_text(angle = 0,
hjust = 0.5,
size = 12,
family = ""),
axis.text.y = element_text(size = 12,
family = ""),
legend.text = element_text(size = 12,
family = ""),
legend.title = element_blank()) +
labs(subtitle = "National Poverty Line - Ethiopia 2015-16 (Full sample)",
x = "Specificity (True negative rate)",
y = "Sensitivity (True positive rate)",
caption = paste(" ")) +
ggsave(paste0("../06 Figures/04 Accuracy/", "02", "_", "roc_full_mod3", ".jpeg"),
width = 10, height = 6)
palette
#----ROC - Model 4----
roc_mod4 <- roc(pred_mod4_test$poor_npl1, pred_mod4_test$predicted_probs)
auc_mod4 <- round(auc(pred_mod4_test$poor_npl1, pred_mod4_test$predicted_probs), 4)
ggroc(roc_mod4, colour = '#A0CBE8FF', size = 1) +
ggtitle(paste0('ROC Curve - EBM-MOSAIKS', '(AUC = ', auc_mod4, ')')) +
theme_minimal() +
theme(plot.title = element_text(face = "bold",
size = 16,
family = "Arial"),
plot.subtitle = element_text(size = 12,
face = "plain",
family = "Arial"),
plot.caption = element_text(hjust = 0,
face = "plain",
family = "Arial",
size = 8,
colour = "#777777"),
panel.background = element_rect(fill = "white",
colour = "white",
size = 0.15,
linetype = "solid"),
panel.grid.major = element_line(size = 0.15,
linetype = 'solid',
colour = "gray40"),
panel.grid.minor = element_line(size = 0.15,
linetype = 'solid',
colour = "gray40"),
axis.title.x = (element_text(size = 16,
family = "Arial")),
axis.title.y = (element_text(size =16,
family = "Arial")),
element_line(linetype = "dotted",
colour = "gray99",
size = .1),
axis.text.x = element_text(angle = 0,
hjust = 0.5,
size = 12,
family = ""),
axis.text.y = element_text(size = 12,
family = ""),
legend.text = element_text(size = 12,
family = ""),
legend.title = element_blank()) +
labs(subtitle = "National Poverty Line - Ethiopia 2015-16 (Full sample)",
x = "Specificity (True negative rate)",
y = "Sensitivity (True positive rate)",
caption = paste(" ")) +
ggsave(paste0("../06 Figures/04 Accuracy/", "02", "_", "roc_full_mod4", ".jpeg"),
width = 10, height = 6)
palette
#----ROC - Model 5----
roc_mod5 <- roc(pred_mod5_test$poor_npl1, pred_mod5_test$predicted_probs)
auc_mod5 <- round(auc(pred_mod5_test$poor_npl1, pred_mod5_test$predicted_probs), 4)
ggroc(roc_mod5, colour = '#D37295FF', size = 1) +
ggtitle(paste0('ROC Curve - EBM-LSMS+MOSAIKS', '(AUC = ', auc_mod5, ')')) +
theme_minimal() +
theme(plot.title = element_text(face = "bold",
size = 16,
family = "Arial"),
plot.subtitle = element_text(size = 12,
face = "plain",
family = "Arial"),
plot.caption = element_text(hjust = 0,
face = "plain",
family = "Arial",
size = 8,
colour = "#777777"),
panel.background = element_rect(fill = "white",
colour = "white",
size = 0.15,
linetype = "solid"),
panel.grid.major = element_line(size = 0.15,
linetype = 'solid',
colour = "gray40"),
panel.grid.minor = element_line(size = 0.15,
linetype = 'solid',
colour = "gray40"),
axis.title.x = (element_text(size = 16,
family = "Arial")),
axis.title.y = (element_text(size =16,
family = "Arial")),
element_line(linetype = "dotted",
colour = "gray99",
size = .1),
axis.text.x = element_text(angle = 0,
hjust = 0.5,
size = 12,
family = ""),
axis.text.y = element_text(size = 12,
family = ""),
legend.text = element_text(size = 12,
family = ""),
legend.title = element_blank()) +
labs(subtitle = "National Poverty Line - Ethiopia 2015-16 (Full sample)",
x = "Specificity (True negative rate)",
y = "Sensitivity (True positive rate)",
caption = paste(" ")) +
ggsave(paste0("../06 Figures/04 Accuracy/", "02", "_", "roc_full_mod5", ".jpeg"),
width = 10, height = 6)
#----ROC - Compare models----
ggroc(list(call_roc_name_1 = roc_mod1, call_roc_name_2 = roc_mod2,
call_roc_name_3 = roc_mod3, call_roc_name_4 = roc_mod4,
call_roc_name_5 = roc_mod5)) +
theme_minimal() +
scale_color_manual(labels = c("EN - LSMS", "EN - LSMS+RWI",
"EBM - LSMS", "EBM - MOSAIKS",
"EBM - LSMS+MOSAIKS"),
values = c("#E15759FF", "#8CD17DFF",
"#499894FF", "#A0CBE8FF",
"#D37295FF")) +
theme(plot.title = element_text(face = "bold",
size = 16,
family = "Arial"),
plot.subtitle = element_text(size = 12,
face = "plain",
family = "Arial"),
plot.caption = element_text(hjust = 0,
face = "plain",
family = "Arial",
size = 8,
colour = "#777777"),
panel.background = element_rect(fill = "white",
colour = "white",
size = 0.15,
linetype = "solid"),
panel.grid.major = element_line(size = 0.15,
linetype = 'solid',
colour = "gray40"),
panel.grid.minor = element_line(size = 0.15,
linetype = 'solid',
colour = "gray40"),
axis.title.x = (element_text(size = 16,
family = "Arial")),
axis.title.y = (element_text(size =16,
family = "Arial")),
element_line(linetype = "dotted",
colour = "gray99",
size = .1),
axis.text.x = element_text(angle = 0,
hjust = 0.5,
size = 12,
family = ""),
axis.text.y = element_text(size = 12,
family = ""),
legend.text = element_text(size = 12,
family = ""),
legend.title = element_blank()) +
labs(subtitle = "National Poverty Line - Ethiopia 2015-16 (Full sample)",
title = "ROC curves by type of model",
x = "Specificity (True negative rate)",
y = "Sensitivity (True positive rate)",
caption = paste(" ")) +
ggsave(paste0("../06 Figures/04 Accuracy/", "02", "_", "roc_full_allmodels", ".jpeg"),
width = 10, height = 6)
auc_mod1
auc_mod2
auc_mod3
auc_mod4
auc_mod5
#----ROC - Compare models----
ggroc(list(call_roc_name_1 = roc_mod1, call_roc_name_2 = roc_mod2,
call_roc_name_3 = roc_mod3, call_roc_name_4 = roc_mod4,
call_roc_name_5 = roc_mod5)) +
theme_minimal() +
scale_color_manual(labels = c("EN - LSMS (0.76)", "EN - LSMS+RWI (0.75)",
"EBM - LSMS (0.79)", "EBM - MOSAIKS (0.76)",
"EBM - LSMS+MOSAIKS (0.84)"),
values = c("#E15759FF", "#8CD17DFF",
"#499894FF", "#A0CBE8FF",
"#D37295FF")) +
theme(plot.title = element_text(face = "bold",
size = 16,
family = "Arial"),
plot.subtitle = element_text(size = 12,
face = "plain",
family = "Arial"),
plot.caption = element_text(hjust = 0,
face = "plain",
family = "Arial",
size = 8,
colour = "#777777"),
panel.background = element_rect(fill = "white",
colour = "white",
size = 0.15,
linetype = "solid"),
panel.grid.major = element_line(size = 0.15,
linetype = 'solid',
colour = "gray40"),
panel.grid.minor = element_line(size = 0.15,
linetype = 'solid',
colour = "gray40"),
axis.title.x = (element_text(size = 16,
family = "Arial")),
axis.title.y = (element_text(size =16,
family = "Arial")),
element_line(linetype = "dotted",
colour = "gray99",
size = .1),
axis.text.x = element_text(angle = 0,
hjust = 0.5,
size = 12,
family = ""),
axis.text.y = element_text(size = 12,
family = ""),
legend.text = element_text(size = 12,
family = ""),
legend.title = element_blank()) +
labs(subtitle = "National Poverty Line - Ethiopia 2015-16 (Full sample)",
title = "ROC curves by type of model",
x = "Specificity (True negative rate)",
y = "Sensitivity (True positive rate)",
caption = paste(" ")) +
ggsave(paste0("../06 Figures/04 Accuracy/", "02", "_", "roc_full_allmodels", ".jpeg"),
width = 10, height = 6)
#----ROC - Compare models----
ggroc(list(call_roc_name_1 = roc_mod1, call_roc_name_2 = roc_mod2,
call_roc_name_3 = roc_mod3, call_roc_name_4 = roc_mod4,
call_roc_name_5 = roc_mod5)) +
theme_minimal() +
scale_color_manual(labels = c("EN - LSMS (0.76)", "EN - LSMS+RWI (0.75)",
"EBM - LSMS (0.79)", "EBM - MOSAIKS (0.76)",
"EBM - LSMS+MOSAIKS (0.84)"),
values = c("#E15759FF", "#8CD17DFF",
"#499894FF", "#A0CBE8FF",
"#D37295FF")) +
theme(plot.title = element_text(face = "bold",
size = 16,
family = "Arial"),
plot.subtitle = element_text(size = 12,
face = "plain",
family = "Arial"),
plot.caption = element_text(hjust = 0,
face = "plain",
family = "Arial",
size = 8,
colour = "#777777"),
panel.background = element_rect(fill = "white",
colour = "white",
size = 0.15,
linetype = "solid"),
panel.grid.major = element_line(size = 0.15,
linetype = 'solid',
colour = "gray40"),
panel.grid.minor = element_line(size = 0.15,
linetype = 'solid',
colour = "gray40"),
axis.title.x = (element_text(size = 16,
family = "Arial")),
axis.title.y = (element_text(size =16,
family = "Arial")),
element_line(linetype = "dotted",
colour = "gray99",
size = .1),
axis.text.x = element_text(angle = 0,
hjust = 0.5,
size = 12,
family = ""),
axis.text.y = element_text(size = 12,
family = ""),
legend.text = element_text(size = 12,
family = ""),
legend.title = element_blank()) +
labs(subtitle = "National Poverty Line - Ethiopia 2015-16 (Full sample)",
title = "ROC curves by type of model (AUC*)",
x = "Specificity (True negative rate)",
y = "Sensitivity (True positive rate)",
caption = paste(" ")) +
ggsave(paste0("../06 Figures/04 Accuracy/", "02", "_", "roc_full_allmodels", ".jpeg"),
width = 10, height = 6)
